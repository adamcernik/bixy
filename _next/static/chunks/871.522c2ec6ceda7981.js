"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[871],{9665:(e,t,r)=>{r.d(t,{A:()=>I});var a=r(12115),o=r(52596),l=r(17472),s=r(14391),c=r(75955),i=r(40680),n=r(77856),d=r(47798),m=r(13209),p=r(98963),u=r(18407),h=r(55170),g=r(90870);function b(e){return(0,g.Ay)("MuiAlert",e)}let f=(0,h.A)("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);var x=r(86220),A=r(57515),y=r(95155);let k=(0,A.A)((0,y.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),v=(0,A.A)((0,y.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),w=(0,A.A)((0,y.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),C=(0,A.A)((0,y.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined");var j=r(11593);let S=e=>{let{variant:t,color:r,severity:a,classes:o}=e,s={root:["root","color".concat((0,m.A)(r||a)),"".concat(t).concat((0,m.A)(r||a)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]};return(0,l.A)(s,b,o)},M=(0,c.Ay)(u.A,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t["".concat(r.variant).concat((0,m.A)(r.color||r.severity))]]}})((0,i.A)(e=>{let{theme:t}=e,r="light"===t.palette.mode?s.e$:s.a,a="light"===t.palette.mode?s.a:s.e$;return{...t.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter((0,p.A)(["light"])).map(e=>{let[o]=e;return{props:{colorSeverity:o,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert["".concat(o,"Color")]:r(t.palette[o].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(o,"StandardBg")]:a(t.palette[o].light,.9),["& .".concat(f.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(o,"IconColor")]}:{color:t.palette[o].main}}}}),...Object.entries(t.palette).filter((0,p.A)(["light"])).map(e=>{let[a]=e;return{props:{colorSeverity:a,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert["".concat(a,"Color")]:r(t.palette[a].light,.6),border:"1px solid ".concat((t.vars||t).palette[a].light),["& .".concat(f.icon)]:t.vars?{color:t.vars.palette.Alert["".concat(a,"IconColor")]}:{color:t.palette[a].main}}}}),...Object.entries(t.palette).filter((0,p.A)(["dark"])).map(e=>{let[r]=e;return{props:{colorSeverity:r,variant:"filled"},style:{fontWeight:t.typography.fontWeightMedium,...t.vars?{color:t.vars.palette.Alert["".concat(r,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(r,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[r].dark:t.palette[r].main,color:t.palette.getContrastText(t.palette[r].main)}}}})]}})),E=(0,c.Ay)("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),R=(0,c.Ay)("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),L=(0,c.Ay)("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),z={success:(0,y.jsx)(k,{fontSize:"inherit"}),warning:(0,y.jsx)(v,{fontSize:"inherit"}),error:(0,y.jsx)(w,{fontSize:"inherit"}),info:(0,y.jsx)(C,{fontSize:"inherit"})},I=a.forwardRef(function(e,t){let r=(0,n.b)({props:e,name:"MuiAlert"}),{action:a,children:l,className:s,closeText:c="Close",color:i,components:m={},componentsProps:p={},icon:u,iconMapping:h=z,onClose:g,role:b="alert",severity:f="success",slotProps:A={},slots:k={},variant:v="standard",...w}=r,C={...r,color:i,severity:f,variant:v,colorSeverity:i||f},I=S(C),N={slots:{closeButton:m.CloseButton,closeIcon:m.CloseIcon,...k},slotProps:{...p,...A}},[W,B]=(0,d.A)("root",{ref:t,shouldForwardComponentProp:!0,className:(0,o.A)(I.root,s),elementType:M,externalForwardedProps:{...N,...w},ownerState:C,additionalProps:{role:b,elevation:0}}),[T,V]=(0,d.A)("icon",{className:I.icon,elementType:E,externalForwardedProps:N,ownerState:C}),[F,O]=(0,d.A)("message",{className:I.message,elementType:R,externalForwardedProps:N,ownerState:C}),[_,D]=(0,d.A)("action",{className:I.action,elementType:L,externalForwardedProps:N,ownerState:C}),[P,U]=(0,d.A)("closeButton",{elementType:x.A,externalForwardedProps:N,ownerState:C}),[H,Y]=(0,d.A)("closeIcon",{elementType:j.A,externalForwardedProps:N,ownerState:C});return(0,y.jsxs)(W,{...B,children:[!1!==u?(0,y.jsx)(T,{...V,children:u||h[f]||z[f]}):null,(0,y.jsx)(F,{...O,children:l}),null!=a?(0,y.jsx)(_,{...D,children:a}):null,null==a&&g?(0,y.jsx)(_,{...D,children:(0,y.jsx)(P,{size:"small","aria-label":c,title:c,color:"inherit",onClick:g,...U,children:(0,y.jsx)(H,{fontSize:"small",...Y})})}):null]})})},11593:(e,t,r)=>{r.d(t,{A:()=>l}),r(12115);var a=r(57515),o=r(95155);let l=(0,a.A)((0,o.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},60871:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var a=r(95155),o=r(12115),l=r(54581),s=r(700),c=r(27088),i=r(17348),n=r(16675),d=r(76380),m=r(68534),p=r(14426),u=r(9665),h=r(69325);function g(){let[e,t]=(0,o.useState)(null),[r,g]=(0,o.useState)(!1),[b,f]=(0,o.useState)(0),[x,A]=(0,o.useState)(null),[y,k]=(0,o.useState)(null),[v,w]=(0,o.useState)("auto"),[C,j]=(0,o.useState)({skipped:0,total:0,reasons:{}}),S=e=>{let t=e.split("\n")[0],r=[",",";","	"].map(e=>({delimiter:e,count:(t.match(RegExp("	"===e?"	":"\\".concat(e),"g"))||[]).length})).sort((e,t)=>t.count-e.count)[0];return r.count>0?r.delimiter:","},M=e=>{j(t=>{let r={...t.reasons};return r[e]=(r[e]||0)+1,{...t,skipped:t.skipped+1,reasons:r}})},E=(e,t)=>{let r=e.split(/\r?\n/);j({skipped:0,total:r.length-1,reasons:{}});let a=0;for(;a<r.length&&!r[a].trim();)a++;if(a>=r.length)throw Error("CSV file appears to be empty");let o=r[a].split(t).map(e=>e.trim());console.log("Headers detected:",o);let l=[];for(let e=a+1;e<r.length;e++){let a=r[e].trim();if(!a){M("Empty line");continue}let s=[],c="",i=!1;for(let e=0;e<a.length;e++){let r=a[e];'"'===r&&(0===e||"\\"!==a[e-1])?i=!i:r!==t||i?c+=r:(s.push(c.trim()),c="")}if(s.push(c.trim()),(s=s.map(e=>e.startsWith('"')&&e.endsWith('"')?e.substring(1,e.length-1).trim():e.trim())).length!==o.length){M("Column count mismatch (found ".concat(s.length,", expected ").concat(o.length,")")),console.warn("Line ".concat(e+1,": Wrong number of columns (found ").concat(s.length,", expected ").concat(o.length,")")),console.warn("Line content: ".concat(a));continue}let n={manufacturer:"Bulls"},d=!1;o.forEach((e,t)=>{let r=s[t];if(r)switch(e.toLowerCase().trim()){case"model":case"modelname":case"name":n.modelName=r,d=!0;break;case"modelnumber":case"model_number":case"model-number":case"productcode":case"product_code":case"product-code":case"code":n.modelNumber=r;break;case"year":case"modelyear":n.modelYear=parseInt(r)||new Date().getFullYear();break;case"weight":case"kg":n.weight=parseFloat(r.replace(",","."))||0;break;case"material":case"framematerial":case"frame":n.frameMaterial=r;break;case"image":case"imageurl":case"img":case"url":case"imagenumber":case"image_number":case"image-number":n.imageUrl=parseInt(r)||0;break;case"link":case"productlink":case"product_link":case"product-link":case"producturl":case"product_url":case"product-url":n.link=r;break;case"location":case"store":case"warehouse":n.location=r;break;case"battery":case"batt":case"wh":n.battery=r;break;case"color":case"colour":n.color=r;break;case"size":case"framesize":n.size=r;break;case"category":case"cat":case"type":n.category=r;break;case"isebike":case"ebike":case"electric":case"e-bike":n.isEbike="true"===r.toLowerCase()||"1"===r||"yes"===r.toLowerCase()||"y"===r.toLowerCase()||"e"===r.toLowerCase();break;case"pieces":case"quantity":case"amount":case"count":case"qty":n.pieces=parseInt(r)||1;break;case"priceretail":case"retail":case"price":case"msrp":n.priceRetail=parseFloat(r.replace(/[, ]/g,""))||0;break;case"priceaction":case"action":case"sale":case"discount":n.priceAction=parseFloat(r.replace(/[, ]/g,""))||0;break;case"pricereseller":case"reseller":case"wholesale":case"dealer":n.priceReseller=parseFloat(r.replace(/[, ]/g,""))||0;break;case"note":case"notes":case"description":case"desc":case"comment":n.note=r;break;default:console.warn('Unknown header: "'.concat(e,'" with value: "').concat(r,'"'))}});let m={manufacturer:"Bulls",modelName:n.modelName||"",modelNumber:n.modelNumber||"",modelYear:n.modelYear||new Date().getFullYear(),weight:n.weight||0,frameMaterial:n.frameMaterial||"",imageUrl:n.imageUrl||0,link:n.link||"",location:n.location||"",battery:n.battery||"",color:n.color||"",size:n.size||"",category:n.category||"",isEbike:n.isEbike||!1,pieces:n.pieces||1,priceRetail:n.priceRetail||0,priceAction:n.priceAction||0,priceReseller:n.priceReseller||0,note:n.note||""};d&&m.modelName?l.push(m):(M("Missing model name"),console.warn("Line ".concat(e+1,": Missing model name")))}return l},R=async e=>{let t=0,r=0;for(let a=0;a<e.length;a++)try{await (0,h.Jy)(e[a]),t++,f(Math.round((a+1)/e.length*100))}catch(t){r++,console.error("Error importing bike ".concat(e[a].modelName,":"),t)}return{imported:t,errors:r}},L=async()=>{if(!e)return void A("Please select a CSV file first");g(!0),f(0),A(null),k(null);try{let t=await e.text();console.log("CSV file size: ".concat(t.length," characters"));let r="auto"===v?S(t):v;console.log('Using delimiter: "'.concat(r,'" (').concat("	"===r?"tab":r,")"));let a=E(t,r);if(console.log("Found ".concat(a.length," valid bikes in CSV")),0===a.length)throw Error("No valid bike data found in the CSV file");let{imported:o,errors:l}=await R(a);k("Successfully imported ".concat(o," bikes out of ").concat(a.length," (").concat(l," errors). ").concat(C.skipped," entries were skipped from the original CSV."))}catch(e){A(e instanceof Error?e.message:"An unknown error occurred"),console.error("CSV import error:",e)}finally{g(!1),t(null);let e=document.getElementById("csv-file-input");e&&(e.value="")}},z=()=>{let e="modelName,modelNumber,modelYear,weight,frameMaterial,imageUrl,link,location,battery,color,size,category,isEbike,pieces,priceRetail,priceAction,priceReseller,note\n";for(let t of[["Wild Cross 1","WC1-2023","2023","15.5","Aluminum","1234","https://bulls.com/wild-cross-1","Store A","Bosch PowerTube 625Wh","Red","M","MTB","true","2","59990","54990","49990","Demo model with slight wear"],["Lacuba EVO 8","LE8-2024","2024","22.3","Carbon","https://example.com/bike2.jpg","https://bulls.com/lacuba-evo-8","Warehouse","Bosch PowerTube 750Wh","Black","L","City","true","1","72990","68990","62990","New arrival"]])e+=t.join(",")+"\n";return e};return(0,a.jsxs)(l.A,{sx:{p:3,backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.1)",mb:3},children:[(0,a.jsx)(s.A,{variant:"h5",component:"h2",sx:{mb:3,color:"#000"},children:"CSV Importer"}),(0,a.jsx)(l.A,{sx:{mb:3},children:(0,a.jsxs)(c.A,{sx:{minWidth:200,color:"#000"},children:[(0,a.jsx)(i.A,{id:"delimiter-label",sx:{color:"#000"},children:"CSV Delimiter"}),(0,a.jsxs)(n.A,{labelId:"delimiter-label",value:v,onChange:e=>{w(e.target.value)},label:"CSV Delimiter",sx:{color:"#000"},children:[(0,a.jsx)(d.A,{value:"auto",children:"Auto-detect"}),(0,a.jsx)(d.A,{value:",",children:"Comma (,)"}),(0,a.jsx)(d.A,{value:";",children:"Semicolon (;)"}),(0,a.jsx)(d.A,{value:"\\t",children:"Tab"})]})]})}),(0,a.jsxs)(l.A,{sx:{display:"flex",gap:2,flexWrap:"wrap",alignItems:"center",mb:3},children:[(0,a.jsxs)(m.A,{variant:"outlined",component:"label",sx:{borderColor:"primary.main",color:"primary.main"},children:["Select CSV File",(0,a.jsx)("input",{type:"file",accept:".csv",onChange:e=>{e.target.files&&e.target.files[0]&&(t(e.target.files[0]),A(null),k(null),j({skipped:0,total:0,reasons:{}}))},hidden:!0})]}),(0,a.jsx)(s.A,{variant:"body1",color:"textSecondary",sx:{color:"#000"},children:e?e.name:"No file selected"}),(0,a.jsx)(m.A,{onClick:()=>{let e=new Blob([z()],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),r=document.createElement("a");r.setAttribute("href",t),r.setAttribute("download","bulls_bikes_sample.csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r)},variant:"outlined",sx:{ml:"auto",borderColor:"primary.main",color:"primary.main"},children:"Download Sample CSV"})]}),(0,a.jsx)(m.A,{onClick:L,variant:"contained",disabled:!e||r,sx:{mb:3},children:r?"Importing...":"Import Data"}),r&&(0,a.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[(0,a.jsx)(p.A,{variant:"determinate",value:b,size:24}),(0,a.jsxs)(s.A,{variant:"body2",color:"textSecondary",sx:{color:"#000"},children:["Importing ",b,"%"]})]}),x&&(0,a.jsx)(u.A,{severity:"error",sx:{mb:3},children:x}),y&&(0,a.jsx)(u.A,{severity:"success",sx:{mb:3},children:y}),C.total>0&&(0,a.jsxs)(l.A,{sx:{mt:3,p:2,backgroundColor:"#f9f9f9",borderRadius:1,color:"#000"},children:[(0,a.jsx)(s.A,{variant:"subtitle2",sx:{fontWeight:"bold",mb:1,color:"#000"},children:"Import Summary"}),(0,a.jsxs)(s.A,{variant:"body2",sx:{color:"#000"},children:["Total rows: ",C.total]}),(0,a.jsxs)(s.A,{variant:"body2",sx:{color:"#000"},children:["Successfully imported: ",C.total-C.skipped]}),(0,a.jsxs)(s.A,{variant:"body2",sx:{color:"#000"},children:["Skipped rows: ",C.skipped]}),Object.keys(C.reasons).length>0&&(0,a.jsxs)(l.A,{sx:{mt:1},children:[(0,a.jsx)(s.A,{variant:"body2",sx:{fontWeight:"bold",color:"#000"},children:"Reasons for skipped rows:"}),(0,a.jsx)("ul",{style:{margin:"4px 0 0 20px",padding:0},children:Object.entries(C.reasons).map(e=>{let[t,r]=e;return(0,a.jsx)("li",{children:(0,a.jsxs)(s.A,{variant:"body2",sx:{color:"#000"},children:[t,": ",r]})},t)})})]})]})]})}},69325:(e,t,r)=>{r.d(t,{JD:()=>c,Jy:()=>i,l$:()=>d,nP:()=>n});var a=r(35317),o=r(810);let l="bikes",s=(0,a.collection)(o.db,l),c=async()=>{try{let e=(await (0,a.getDocs)(s)).docs.map(e=>{let t=e.data();return console.log("Raw bike data from Firebase:",t),{id:e.id,...t}});return console.log("Processed bikes:",e),e}catch(e){if(console.error("Error fetching bikes:",e),e instanceof Error&&e.message.includes("Missing or insufficient permissions")){console.log("Attempting to create collection...");try{return await (0,a.gS)(s,{manufacturer:"Bulls",modelName:"Test Bike",modelNumber:"TB-2024",modelYear:2024,weight:15,frameMaterial:"Aluminum",imageUrl:0,link:"",location:"Store",battery:"Test 500Wh",color:"Black",size:"M",category:"MTB",isEbike:!0,pieces:1,priceRetail:59990,priceAction:54990,priceReseller:49990,note:"Test bike"}),(await (0,a.getDocs)(s)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){throw console.error("Could not create collection:",e),e}}throw e}},i=async e=>{try{return(await (0,a.gS)(s,e)).id}catch(e){throw console.error("Error adding bike:",e),e}},n=async(e,t)=>{try{let r=(0,a.H9)(o.db,l,e);await (0,a.mZ)(r,{...t})}catch(e){throw console.error("Error updating bike:",e),e}},d=async e=>{try{let t=(0,a.H9)(o.db,l,e);await (0,a.kd)(t)}catch(e){throw console.error("Error deleting bike:",e),e}}}}]);