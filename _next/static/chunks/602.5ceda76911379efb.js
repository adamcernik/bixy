"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[602],{11590:(e,r,t)=>{t.r(r),t.d(r,{default:()=>ea});var o=t(95155),a=t(12115),n=t(56278),l=t(54492),s=t(86220),i=t(99927),c=t(54581),d=t(14426),u=t(52596),h=t(17472),p=t(75955),A=t(77856),v=t(55170),y=t(90870);function m(e){return(0,y.Ay)("MuiTableContainer",e)}(0,v.A)("MuiTableContainer",["root"]);let x=e=>{let{classes:r}=e;return(0,h.A)({root:["root"]},m,r)},b=(0,p.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,r)=>r.root})({width:"100%",overflowX:"auto"}),f=a.forwardRef(function(e,r){let t=(0,A.b)({props:e,name:"MuiTableContainer"}),{className:a,component:n="div",...l}=t,s={...t,component:n},i=x(s);return(0,o.jsx)(b,{ref:r,as:n,className:(0,u.A)(i.root,a),ownerState:s,...l})});var j=t(18407),g=t(80963),w=t(40680);function C(e){return(0,y.Ay)("MuiTable",e)}(0,v.A)("MuiTable",["root","stickyHeader"]);let M=e=>{let{classes:r,stickyHeader:t}=e;return(0,h.A)({root:["root",t&&"stickyHeader"]},C,r)},R=(0,p.Ay)("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,t.stickyHeader&&r.stickyHeader]}})((0,w.A)(e=>{let{theme:r}=e;return{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":{...r.typography.body2,padding:r.spacing(2),color:(r.vars||r).palette.text.secondary,textAlign:"left",captionSide:"bottom"},variants:[{props:e=>{let{ownerState:r}=e;return r.stickyHeader},style:{borderCollapse:"separate"}}]}})),T="table",k=a.forwardRef(function(e,r){let t=(0,A.b)({props:e,name:"MuiTable"}),{className:n,component:l=T,padding:s="normal",size:i="medium",stickyHeader:c=!1,...d}=t,h={...t,component:l,padding:s,size:i,stickyHeader:c},p=M(h),v=a.useMemo(()=>({padding:s,size:i,stickyHeader:c}),[s,i,c]);return(0,o.jsx)(g.A.Provider,{value:v,children:(0,o.jsx)(R,{as:l,role:l===T?null:"table",ref:r,className:(0,u.A)(p.root,n),ownerState:h,...d})})});var S=t(61391);function N(e){return(0,y.Ay)("MuiTableHead",e)}(0,v.A)("MuiTableHead",["root"]);let H=e=>{let{classes:r}=e;return(0,h.A)({root:["root"]},N,r)},O=(0,p.Ay)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,r)=>r.root})({display:"table-header-group"}),U={variant:"head"},E="thead",P=a.forwardRef(function(e,r){let t=(0,A.b)({props:e,name:"MuiTableHead"}),{className:a,component:n=E,...l}=t,s={...t,component:n},i=H(s);return(0,o.jsx)(S.A.Provider,{value:U,children:(0,o.jsx)(O,{as:n,className:(0,u.A)(i.root,a),ref:r,role:n===E?null:"rowgroup",ownerState:s,...l})})});var B=t(14391);function L(e){return(0,y.Ay)("MuiTableRow",e)}let _=(0,v.A)("MuiTableRow",["root","selected","hover","head","footer"]),D=e=>{let{classes:r,selected:t,hover:o,head:a,footer:n}=e;return(0,h.A)({root:["root",t&&"selected",o&&"hover",a&&"head",n&&"footer"]},L,r)},F=(0,p.Ay)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,r)=>{let{ownerState:t}=e;return[r.root,t.head&&r.head,t.footer&&r.footer]}})((0,w.A)(e=>{let{theme:r}=e;return{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,["&.".concat(_.hover,":hover")]:{backgroundColor:(r.vars||r).palette.action.hover},["&.".concat(_.selected)]:{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / ").concat(r.vars.palette.action.selectedOpacity,")"):(0,B.X4)(r.palette.primary.main,r.palette.action.selectedOpacity),"&:hover":{backgroundColor:r.vars?"rgba(".concat(r.vars.palette.primary.mainChannel," / calc(").concat(r.vars.palette.action.selectedOpacity," + ").concat(r.vars.palette.action.hoverOpacity,"))"):(0,B.X4)(r.palette.primary.main,r.palette.action.selectedOpacity+r.palette.action.hoverOpacity)}}}})),I=a.forwardRef(function(e,r){let t=(0,A.b)({props:e,name:"MuiTableRow"}),{className:n,component:l="tr",hover:s=!1,selected:i=!1,...c}=t,d=a.useContext(S.A),h={...t,component:l,hover:s,selected:i,head:d&&"head"===d.variant,footer:d&&"footer"===d.variant},p=D(h);return(0,o.jsx)(F,{as:l,ref:r,className:(0,u.A)(p.root,n),role:"tr"===l?null:"row",ownerState:h,...c})});var X=t(64263);function z(e){return(0,y.Ay)("MuiTableBody",e)}(0,v.A)("MuiTableBody",["root"]);let W=e=>{let{classes:r}=e;return(0,h.A)({root:["root"]},z,r)},J=(0,p.Ay)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,r)=>r.root})({display:"table-row-group"}),Y={variant:"body"},q="tbody",G=a.forwardRef(function(e,r){let t=(0,A.b)({props:e,name:"MuiTableBody"}),{className:a,component:n=q,...l}=t,s={...t,component:n},i=W(s);return(0,o.jsx)(S.A.Provider,{value:Y,children:(0,o.jsx)(J,{className:(0,u.A)(i.root,a),as:n,ref:r,role:n===q?null:"rowgroup",ownerState:s,...l})})});var K=t(42663),Q=t(700),V=t(90835),Z=t(75824),$=t(9665);let ee=(0,t(57515).A)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");var er=t(41396),et=t(23475),eo=t(810);function ea(e){let{open:r,onClose:t}=e,{userData:u}=(0,et.A)(),[h,p]=(0,a.useState)([]),[A,v]=(0,a.useState)(!0),[y,m]=(0,a.useState)({open:!1,message:"",severity:"success"}),x=(null==u?void 0:u.isAdmin)||(null==u?void 0:u.email)===eo.vE,b=async()=>{v(!0),p(await (0,er.CF)()),v(!1)};(0,a.useEffect)(()=>{r&&x&&b()},[r,x]);let g=async(e,r)=>{await (0,er.JY)(e,r)?(p(t=>t.map(t=>t.uid===e?{...t,hasAccess:r}:t)),m({open:!0,message:"User ".concat(r?"granted":"removed"," access successfully"),severity:"success"})):m({open:!0,message:"Failed to update user access",severity:"error"})},w=()=>{m({...y,open:!1})},C=e=>{if(!e)return"N/A";try{let r=e.toDate();return new Intl.DateTimeFormat("en-US",{dateStyle:"medium",timeStyle:"short"}).format(r)}catch(e){return"Invalid date"}};return x?(0,o.jsxs)(n.A,{open:r,onClose:t,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{height:"80vh"}},children:[(0,o.jsxs)(l.A,{children:["User Management",(0,o.jsx)(s.A,{"aria-label":"close",onClick:t,sx:{position:"absolute",right:8,top:8},children:(0,o.jsx)(ee,{})})]}),(0,o.jsx)(i.A,{children:A?(0,o.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,o.jsx)(d.A,{})}):(0,o.jsx)(f,{component:j.A,children:(0,o.jsxs)(k,{children:[(0,o.jsx)(P,{children:(0,o.jsxs)(I,{children:[(0,o.jsx)(X.A,{children:"User"}),(0,o.jsx)(X.A,{children:"Email"}),(0,o.jsx)(X.A,{children:"Last Login"}),(0,o.jsx)(X.A,{children:"Registered"}),(0,o.jsx)(X.A,{align:"center",children:"Has Access"})]})}),(0,o.jsxs)(G,{children:[h.map(e=>{var r;return(0,o.jsxs)(I,{children:[(0,o.jsx)(X.A,{children:(0,o.jsxs)(c.A,{sx:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(K.A,{src:e.photoURL||void 0,alt:e.displayName,sx:{mr:2,width:32,height:32},children:(null==(r=e.displayName)?void 0:r.charAt(0))||"U"}),(0,o.jsx)(Q.A,{variant:"body2",children:e.displayName||"Anonymous"})]})}),(0,o.jsx)(X.A,{children:e.email}),(0,o.jsx)(X.A,{children:C(e.lastLogin)}),(0,o.jsx)(X.A,{children:C(e.createdAt)}),(0,o.jsx)(X.A,{align:"center",children:e.isAdmin?(0,o.jsx)(Q.A,{variant:"body2",color:"primary",children:"Admin"}):(0,o.jsx)(V.A,{checked:e.hasAccess,onChange:()=>g(e.uid,!e.hasAccess),color:"primary"})})]},e.uid)}),0===h.length&&(0,o.jsx)(I,{children:(0,o.jsx)(X.A,{colSpan:5,align:"center",children:"No users found"})})]})]})})}),(0,o.jsx)(Z.A,{open:y.open,autoHideDuration:4e3,onClose:w,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,o.jsx)($.A,{onClose:w,severity:y.severity,sx:{width:"100%"},children:y.message})})]}):null}},23511:(e,r,t)=>{t.d(r,{A:()=>o});let o=t(12115).createContext(void 0)},27011:(e,r,t)=>{t.d(r,{A:()=>n});var o=t(12115),a=t(23511);function n(){return o.useContext(a.A)}}}]);