(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{810:(e,r,t)=>{"use strict";let a,s,n,i;t.d(r,{db:()=>s,hJ:()=>i,j2:()=>n,vE:()=>d});var l=t(23915),o=t(35317),c=t(86864),u=t(16203),_=t(49509);let E={apiKey:_.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyAZ4cdr8KZU-Z5Ohp04MzvIGLG_tGblxfE",authDomain:_.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"bixy-stock.firebaseapp.com",projectId:_.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"bixy-stock",storageBucket:_.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"bixy-stock.appspot.com",messagingSenderId:_.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"357634877813",appId:_.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:357634877813:web:80fc5b029a1606c3200b3c",measurementId:_.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-3DZEWTG2HW"};try{(0,l.Dk)().length?(a=(0,l.Dk)()[0],console.log("Using existing Firebase app")):(a=(0,l.Wp)(E),console.log("Firebase initialized successfully")),s=(0,o.aU)(a),console.log("Firestore initialized successfully"),n=(0,u.xI)(a),i=new u.HF,console.log("Firebase Auth initialized successfully")}catch(e){throw console.error("Error initializing Firebase:",e),e}(0,c.P5)(a);let d=_.env.NEXT_PUBLIC_ADMIN_EMAIL||"adam.cernik@gmail.com"},19324:()=>{},23475:(e,r,t)=>{"use strict";t.d(r,{A:()=>c,AuthProvider:()=>u});var a=t(95155),s=t(12115),n=t(16203),i=t(810),l=t(41396);let o=(0,s.createContext)({user:null,userData:null,loading:!0,loginWithGoogle:async()=>{},logout:async()=>{}});function c(){return(0,s.useContext)(o)}function u(e){let{children:r}=e,[t,c]=(0,s.useState)(null),[u,_]=(0,s.useState)(null),[E,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>(0,n.hg)(i.j2,async e=>{c(e),e?_(await (0,l.LU)(e)):_(null),d(!1)}),[]);let g=async()=>{try{let e=await (0,l.G6)();_(e)}catch(e){console.error("Error logging in with Google:",e)}},y=async()=>{try{await (0,l.BP)(),_(null)}catch(e){console.error("Error logging out:",e)}};return(0,a.jsx)(o.Provider,{value:{user:t,userData:u,loading:E,loginWithGoogle:g,logout:y},children:!E&&r})}},39432:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_7f9a85",variable:"__variable_7f9a85"}},41396:(e,r,t)=>{"use strict";t.d(r,{BP:()=>l,CF:()=>c,G6:()=>i,JY:()=>u,LU:()=>o});var a=t(16203),s=t(35317),n=t(810);let i=async()=>{try{let e=(await (0,a.df)(n.j2,n.hJ)).user,r=(0,s.H9)(n.db,"users",e.uid),t=await (0,s.x7)(r),i=s.Dc.now(),l=e.email===n.vE;if(t.exists()){let e=t.data();return await (0,s.mZ)(r,{lastLogin:i}),e}{let t={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL,hasAccess:l,isAdmin:l,lastLogin:i,createdAt:i};return await (0,s.BN)(r,t),t}}catch(e){return console.error("Error signing in with Google:",e),null}},l=async()=>{try{return await (0,a.CI)(n.j2),!0}catch(e){return console.error("Error signing out:",e),!1}},o=async e=>{try{let r=(0,s.H9)(n.db,"users",e.uid),t=await (0,s.x7)(r);if(t.exists())return t.data();return null}catch(e){return console.error("Error getting current user data:",e),null}},c=async()=>{try{let e=(0,s.rJ)(n.db,"users"),r=(0,s.P)(e),t=await (0,s.GG)(r),a=[];return t.forEach(e=>{a.push(e.data())}),a}catch(e){return console.error("Error getting users:",e),[]}},u=async(e,r)=>{try{let t=(0,s.H9)(n.db,"users",e);return await (0,s.mZ)(t,{hasAccess:r}),!0}catch(e){return console.error("Error updating user access:",e),!1}}},65688:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_f9091f",variable:"__variable_f9091f"}},80043:(e,r,t)=>{Promise.resolve().then(t.bind(t,23475)),Promise.resolve().then(t.t.bind(t,65688,23)),Promise.resolve().then(t.t.bind(t,39432,23)),Promise.resolve().then(t.t.bind(t,19324,23))}},e=>{var r=r=>e(e.s=r);e.O(0,[261,992,118,566,441,684,358],()=>r(80043)),_N_E=e.O()}]);