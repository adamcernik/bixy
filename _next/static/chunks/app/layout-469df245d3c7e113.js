(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{810:(e,r,t)=>{"use strict";let a,s,i,o;t.d(r,{db:()=>s,hJ:()=>o,j2:()=>i,vE:()=>d});var l=t(23915),n=t(35317),c=t(86864),u=t(16203);try{(0,l.Dk)().length?(a=(0,l.Dk)()[0],console.log("Using existing Firebase app")):(a=(0,l.Wp)({apiKey:"AIzaSyAZ4cdr8KZU-Z5Ohp04MzvIGLG_tGblxfE",authDomain:"bixy-stock.firebaseapp.com",projectId:"bixy-stock",storageBucket:"bixy-stock.appspot.com",messagingSenderId:"357634877813",appId:"1:357634877813:web:80fc5b029a1606c3200b3c",measurementId:"G-3DZEWTG2HW"}),console.log("Firebase initialized successfully")),s=(0,n.aU)(a),console.log("Firestore initialized successfully"),i=(0,u.xI)(a),o=new u.HF,console.log("Firebase Auth initialized successfully")}catch(e){throw console.error("Error initializing Firebase:",e),e}(0,c.P5)(a);let d="adam.cernik@gmail.com"},19324:()=>{},23475:(e,r,t)=>{"use strict";t.d(r,{A:()=>c,AuthProvider:()=>u});var a=t(95155),s=t(12115),i=t(16203),o=t(810),l=t(41396);let n=(0,s.createContext)({user:null,userData:null,loading:!0,loginWithGoogle:async()=>{},logout:async()=>{}});function c(){return(0,s.useContext)(n)}function u(e){let{children:r}=e,[t,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[g,y]=(0,s.useState)(!0);(0,s.useEffect)(()=>(0,i.hg)(o.j2,async e=>{c(e),e?d(await (0,l.LU)(e)):d(null),y(!1)}),[]);let h=async()=>{try{let e=await (0,l.G6)();d(e)}catch(e){console.error("Error logging in with Google:",e)}},b=async()=>{try{await (0,l.BP)(),d(null)}catch(e){console.error("Error logging out:",e)}};return(0,a.jsx)(n.Provider,{value:{user:t,userData:u,loading:g,loginWithGoogle:h,logout:b},children:!g&&r})}},39432:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_7f9a85",variable:"__variable_7f9a85"}},41396:(e,r,t)=>{"use strict";t.d(r,{BP:()=>l,CF:()=>c,G6:()=>o,JY:()=>u,LU:()=>n});var a=t(16203),s=t(35317),i=t(810);let o=async()=>{try{let e=(await (0,a.df)(i.j2,i.hJ)).user,r=(0,s.H9)(i.db,"users",e.uid),t=await (0,s.x7)(r),o=s.Dc.now(),l=e.email===i.vE;if(t.exists()){let e=t.data();return await (0,s.mZ)(r,{lastLogin:o}),e}{let t={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL,hasAccess:l,isAdmin:l,lastLogin:o,createdAt:o};return await (0,s.BN)(r,t),t}}catch(e){return console.error("Error signing in with Google:",e),null}},l=async()=>{try{return await (0,a.CI)(i.j2),!0}catch(e){return console.error("Error signing out:",e),!1}},n=async e=>{try{let r=(0,s.H9)(i.db,"users",e.uid),t=await (0,s.x7)(r);if(t.exists())return t.data();return null}catch(e){return console.error("Error getting current user data:",e),null}},c=async()=>{try{let e=(0,s.rJ)(i.db,"users"),r=(0,s.P)(e),t=await (0,s.GG)(r),a=[];return t.forEach(e=>{a.push(e.data())}),a}catch(e){return console.error("Error getting users:",e),[]}},u=async(e,r)=>{try{let t=(0,s.H9)(i.db,"users",e);return await (0,s.mZ)(t,{hasAccess:r}),!0}catch(e){return console.error("Error updating user access:",e),!1}}},65688:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_f9091f",variable:"__variable_f9091f"}},94379:(e,r,t)=>{Promise.resolve().then(t.bind(t,23475)),Promise.resolve().then(t.t.bind(t,65688,23)),Promise.resolve().then(t.t.bind(t,39432,23)),Promise.resolve().then(t.t.bind(t,19324,23))}},e=>{var r=r=>e(e.s=r);e.O(0,[261,992,118,566,441,684,358],()=>r(94379)),_N_E=e.O()}]);