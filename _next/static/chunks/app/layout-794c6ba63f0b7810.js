(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{810:(e,r,t)=>{"use strict";let a,o,s,n;t.d(r,{db:()=>o,hJ:()=>n,j2:()=>s,vE:()=>b});var i=t(3915),l=t(5317),c=t(6864),u=t(6203),d=t(9509);let E={apiKey:d.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyAZ4cdr8KZU-Z5Ohp04MzvIGLG_tGblxfE",authDomain:d.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"bixy-stock.firebaseapp.com",projectId:d.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"bixy-stock",storageBucket:d.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"bixy-stock.appspot.com",messagingSenderId:d.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"357634877813",appId:d.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:357634877813:web:80fc5b029a1606c3200b3c",measurementId:d.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-3DZEWTG2HW"};try{(0,i.Dk)().length?(a=(0,i.Dk)()[0],console.log("Using existing Firebase app")):(a=(0,i.Wp)(E),console.log("Firebase initialized successfully")),o=(0,l.aU)(a),console.log("Firestore initialized successfully"),s=(0,u.xI)(a),n=new u.HF,console.log("Firebase Auth initialized successfully")}catch(e){throw console.error("Error initializing Firebase:",e),e}(0,c.P5)(a);let b=d.env.NEXT_PUBLIC_ADMIN_EMAIL||"adam.cernik@gmail.com"},852:(e,r,t)=>{"use strict";t.d(r,{ThemeProvider:()=>c});var a=t(5155),o=t(2115),s=t(9839),n=t(3196),i=t(2548);let l=(0,o.createContext)({mode:"dark",toggleColorMode:()=>{}});function c(e){let{children:r}=e,[t,c]=(0,o.useState)("dark");(0,o.useEffect)(()=>{c("dark")},[]);let u=(0,s.A)({palette:{mode:t,..."dark"===t&&{background:{default:"#121212",paper:"#1e1e1e"},primary:{main:"#90caf9"},secondary:{main:"#ce93d8"}}},components:{MuiCssBaseline:{styleOverrides:{body:{scrollbarColor:"dark"===t?"#2b2b2b #121212":"#959595 #f5f5f5","&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:"dark"===t?"#121212":"#f5f5f5"},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:"dark"===t?"#2b2b2b":"#959595",minHeight:24}}}}}});return(0,a.jsx)(l.Provider,{value:{mode:t,toggleColorMode:()=>{c(e=>"light"===e?"dark":"light")}},children:(0,a.jsxs)(n.A,{theme:u,children:[(0,a.jsx)(i.Ay,{}),r]})})}},1396:(e,r,t)=>{"use strict";t.d(r,{BP:()=>i,CF:()=>c,G6:()=>n,JY:()=>u,LU:()=>l});var a=t(6203),o=t(5317),s=t(810);let n=async()=>{try{let e=(await (0,a.df)(s.j2,s.hJ)).user,r=(0,o.H9)(s.db,"users",e.uid),t=await (0,o.x7)(r),n=o.Dc.now(),i=e.email===s.vE;if(t.exists()){let e=t.data();return await (0,o.mZ)(r,{lastLogin:n}),e}{let t={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL,hasAccess:i,isAdmin:i,lastLogin:n,createdAt:n};return await (0,o.BN)(r,t),t}}catch(e){return console.error("Error signing in with Google:",e),null}},i=async()=>{try{return await (0,a.CI)(s.j2),!0}catch(e){return console.error("Error signing out:",e),!1}},l=async e=>{try{let r=(0,o.H9)(s.db,"users",e.uid),t=await (0,o.x7)(r);if(t.exists())return t.data();return null}catch(e){return console.error("Error getting current user data:",e),null}},c=async()=>{try{let e=(0,o.rJ)(s.db,"users"),r=(0,o.P)(e),t=await (0,o.GG)(r),a=[];return t.forEach(e=>{a.push(e.data())}),a}catch(e){return console.error("Error getting users:",e),[]}},u=async(e,r)=>{try{let t=(0,o.H9)(s.db,"users",e);return await (0,o.mZ)(t,{hasAccess:r}),!0}catch(e){return console.error("Error updating user access:",e),!1}}},3475:(e,r,t)=>{"use strict";t.d(r,{A:()=>c,AuthProvider:()=>u});var a=t(5155),o=t(2115),s=t(6203),n=t(810),i=t(1396);let l=(0,o.createContext)({user:null,userData:null,loading:!0,loginWithGoogle:async()=>{},logout:async()=>{}});function c(){return(0,o.useContext)(l)}function u(e){let{children:r}=e,[t,c]=(0,o.useState)(null),[u,d]=(0,o.useState)(null),[E,b]=(0,o.useState)(!0);(0,o.useEffect)(()=>(0,s.hg)(n.j2,async e=>{c(e),e?d(await (0,i.LU)(e)):d(null),b(!1)}),[]);let g=async()=>{try{let e=await (0,i.G6)();d(e)}catch(e){console.error("Error logging in with Google:",e)}},h=async()=>{try{await (0,i.BP)(),d(null)}catch(e){console.error("Error logging out:",e)}};return(0,a.jsx)(l.Provider,{value:{user:t,userData:u,loading:E,loginWithGoogle:g,logout:h},children:!E&&r})}},9324:()=>{},9637:(e,r,t)=>{Promise.resolve().then(t.bind(t,3475)),Promise.resolve().then(t.bind(t,852)),Promise.resolve().then(t.t.bind(t,5688,23)),Promise.resolve().then(t.t.bind(t,9432,23)),Promise.resolve().then(t.t.bind(t,9324,23))}},e=>{var r=r=>e(e.s=r);e.O(0,[261,992,118,903,559,441,684,358],()=>r(9637)),_N_E=e.O()}]);