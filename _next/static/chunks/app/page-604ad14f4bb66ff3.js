(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{810:(e,s,r)=>{"use strict";let n,l;r.d(s,{db:()=>l});var t=r(3915),a=r(5317),i=r(6864);try{(0,t.Dk)().length?(n=(0,t.Dk)()[0],console.log("Using existing Firebase app")):(n=(0,t.Wp)({apiKey:"AIzaSyAZ4cdr8KZU-Z5Ohp04MzvIGLG_tGblxfE",authDomain:"bixy-stock.firebaseapp.com",projectId:"bixy-stock",storageBucket:"bixy-stock.appspot.com",messagingSenderId:"357634877813",appId:"1:357634877813:web:80fc5b029a1606c3200b3c",measurementId:"G-3DZEWTG2HW"}),console.log("Firebase initialized successfully")),l=(0,a.aU)(n),console.log("Firestore initialized successfully")}catch(e){throw console.error("Error initializing Firebase:",e),e}(0,i.P5)(n)},1786:(e,s,r)=>{Promise.resolve().then(r.bind(r,6967))},6967:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>p});var n=r(5155),l=r(2115),t=r(5028),a=r(810),i=r(5317),o=r(3729);function c(){let[e,s]=(0,l.useState)("loading"),[r,t]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{try{await (0,i.GG)((0,i.rJ)(a.db,"bikes")),s("connected")}catch(e){console.error("Firebase connection error:",e),s("error"),t(e instanceof Error?e.message:String(e))}})()},[]),(0,n.jsx)(o.A,{title:"loading"===e?"Testing database connection...":"connected"===e?"Connected to database":"Error connecting to database: ".concat(r),arrow:!0,placement:"bottom",children:(0,n.jsx)("div",{className:"\n          w-3 h-3 rounded-full \n          ".concat("loading"===e?"bg-yellow-400 animate-pulse":"connected"===e?"bg-green-500":"bg-red-500","\n        "),style:{cursor:"help"}})})}var d=r(4581),x=r(9994),m=r(5715),h=r(8534),b=r(857),u=r(5695);let g=(0,t.default)(()=>Promise.all([r.e(524),r.e(969),r.e(338),r.e(267)]).then(r.bind(r,2788)),{loadableGenerated:{webpack:()=>[2788]},ssr:!1,loading:()=>(0,n.jsx)("p",{children:"Loading bike inventory..."})}),j=(0,t.default)(()=>Promise.all([r.e(969),r.e(871)]).then(r.bind(r,871)),{loadableGenerated:{webpack:()=>[871]},ssr:!1,loading:()=>(0,n.jsx)("p",{children:"Loading CSV importer..."})});function p(){let[e,s]=(0,l.useState)(null),[r,t]=(0,l.useState)(0),[a,i]=(0,l.useState)(!0),[o,p]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1);(0,u.usePathname)();let y="/bixy";return((0,l.useEffect)(()=>{let e=e=>{var r,n;console.error("Global error:",e.error),((null==(r=e.error)?void 0:r.toString().includes("Firebase"))||(null==(n=e.error)?void 0:n.toString().includes("Firestore")))&&(s(e.error),e.preventDefault())};return window.addEventListener("error",e),()=>window.removeEventListener("error",e)},[]),e)?(0,n.jsx)("main",{className:"flex min-h-screen flex-col p-6",children:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"flex items-center mb-4",children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("img",{src:"".concat(y,"/bixy-logo.svg"),alt:"Bixy Logo",width:80,height:64,style:{objectFit:"contain"}}),(0,n.jsx)("h1",{className:"text-3xl font-bold ml-4",children:"Bixy Stock Management"}),(0,n.jsx)("div",{className:"ml-2",children:(0,n.jsx)(c,{})})]})}),(0,n.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,n.jsx)("p",{className:"font-bold",children:"Error connecting to database"}),(0,n.jsx)("p",{children:e.message}),(0,n.jsx)("p",{className:"mt-2",children:"Please check your Firebase configuration and make sure you have the correct permissions."})]})]})}):(0,n.jsx)("main",{className:"flex min-h-screen flex-col p-6",children:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"flex items-center mb-4",children:(0,n.jsxs)("div",{className:"flex items-center flex-grow",children:[(0,n.jsx)("img",{src:"".concat(y,"/bixy-logo.svg"),alt:"Bixy Logo",width:80,height:64,style:{objectFit:"contain"}}),(0,n.jsx)("h1",{className:"text-3xl font-bold ml-4",children:"Bixy Stock Management"}),(0,n.jsx)("div",{className:"ml-2",children:(0,n.jsx)(c,{})})]})}),(0,n.jsx)("div",{className:"flex items-center mb-4",children:(0,n.jsxs)(d.A,{sx:{display:"flex",width:"100%",alignItems:"center",borderBottom:1,borderColor:"divider"},children:[(0,n.jsxs)(x.A,{value:r,onChange:(e,s)=>{t(s),0===s?(i(!0),p(!1)):(i(!1),p(!0))},"aria-label":"inventory tabs",sx:{flexGrow:1,"& .MuiTab-root":{color:"#555555","&.Mui-selected":{color:"#1976d2"}}},children:[(0,n.jsx)(m.A,{label:"View Inventory"}),(0,n.jsx)(m.A,{label:"Import from CSV"})]}),0===r&&(0,n.jsx)(h.A,{variant:"contained",color:"primary",startIcon:(0,n.jsx)(b.A,{}),onClick:()=>{v(!0)},sx:{ml:2},children:"Add New Bike"})]})}),(0,n.jsxs)("div",{children:[a&&(0,n.jsx)("div",{className:"h-[calc(100vh-200px)]",children:(0,n.jsx)(g,{openAddDialog:f,setOpenAddDialog:v})}),o&&(0,n.jsx)("div",{children:(0,n.jsx)(j,{})})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[992,300,441,684,358],()=>s(1786)),_N_E=e.O()}]);