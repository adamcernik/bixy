(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{810:(e,t,r)=>{"use strict";let a,s,n,o;r.d(t,{db:()=>s,hJ:()=>o,j2:()=>n,vE:()=>d});var l=r(23915),i=r(35317),c=r(86864),u=r(16203),_=r(49509);let E={apiKey:_.env.NEXT_PUBLIC_FIREBASE_API_KEY||"AIzaSyAZ4cdr8KZU-Z5Ohp04MzvIGLG_tGblxfE",authDomain:_.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"bixy-stock.firebaseapp.com",projectId:_.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"bixy-stock",storageBucket:_.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"bixy-stock.appspot.com",messagingSenderId:_.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"357634877813",appId:_.env.NEXT_PUBLIC_FIREBASE_APP_ID||"1:357634877813:web:80fc5b029a1606c3200b3c",measurementId:_.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-3DZEWTG2HW"};try{(0,l.Dk)().length?(a=(0,l.Dk)()[0],console.log("Using existing Firebase app")):(a=(0,l.Wp)(E),console.log("Firebase initialized successfully")),s=(0,i.aU)(a),console.log("Firestore initialized successfully"),n=(0,u.xI)(a),o=new u.HF,console.log("Firebase Auth initialized successfully")}catch(e){throw console.error("Error initializing Firebase:",e),e}(0,c.P5)(a);let d=_.env.NEXT_PUBLIC_ADMIN_EMAIL||"adam.cernik@gmail.com"},19324:()=>{},23475:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>u});var a=r(95155),s=r(12115),n=r(16203),o=r(810),l=r(41396);let i=(0,s.createContext)({user:null,userData:null,loading:!0,loginWithGoogle:async()=>{},logout:async()=>{}});function c(){return(0,s.useContext)(i)}function u(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[u,_]=(0,s.useState)(null),[E,d]=(0,s.useState)(!0);(0,s.useEffect)(()=>(0,n.hg)(o.j2,async e=>{c(e),e?_(await (0,l.LU)(e)):_(null),d(!1)}),[]);let g=async()=>{try{let e=await (0,l.G6)();_(e)}catch(e){console.error("Error logging in with Google:",e)}},y=async()=>{try{await (0,l.BP)(),_(null)}catch(e){console.error("Error logging out:",e)}};return(0,a.jsx)(i.Provider,{value:{user:r,userData:u,loading:E,loginWithGoogle:g,logout:y},children:!E&&t})}},39432:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_7f9a85",variable:"__variable_7f9a85"}},41396:(e,t,r)=>{"use strict";r.d(t,{BP:()=>l,CF:()=>c,G6:()=>o,JY:()=>u,LU:()=>i});var a=r(16203),s=r(35317),n=r(810);let o=async()=>{try{let e=(await (0,a.df)(n.j2,n.hJ)).user,t=(0,s.H9)(n.db,"users",e.uid),r=await (0,s.x7)(t),o=s.Dc.now(),l=e.email===n.vE;if(r.exists()){let e=r.data();return await (0,s.mZ)(t,{lastLogin:o}),e}{let r={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL,hasAccess:l,isAdmin:l,lastLogin:o,createdAt:o};return await (0,s.BN)(t,r),r}}catch(e){return console.error("Error signing in with Google:",e),null}},l=async()=>{try{return await (0,a.CI)(n.j2),!0}catch(e){return console.error("Error signing out:",e),!1}},i=async e=>{try{let t=(0,s.H9)(n.db,"users",e.uid),r=await (0,s.x7)(t);if(r.exists())return r.data();return null}catch(e){return console.error("Error getting current user data:",e),null}},c=async()=>{try{let e=(0,s.collection)(n.db,"users"),t=(0,s.P)(e),r=await (0,s.getDocs)(t),a=[];return r.forEach(e=>{a.push(e.data())}),a}catch(e){return console.error("Error getting users:",e),[]}},u=async(e,t)=>{try{let r=(0,s.H9)(n.db,"users",e);return await (0,s.mZ)(r,{hasAccess:t}),!0}catch(e){return console.error("Error updating user access:",e),!1}}},65688:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_f9091f",variable:"__variable_f9091f"}},80043:(e,t,r)=>{Promise.resolve().then(r.bind(r,23475)),Promise.resolve().then(r.t.bind(r,65688,23)),Promise.resolve().then(r.t.bind(r,39432,23)),Promise.resolve().then(r.t.bind(r,19324,23))}},e=>{var t=t=>e(e.s=t);e.O(0,[261,992,118,566,441,684,358],()=>t(80043)),_N_E=e.O()}]);