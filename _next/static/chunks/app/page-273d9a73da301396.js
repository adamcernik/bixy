(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{810:(e,s,r)=>{"use strict";let a,l;r.d(s,{db:()=>l});var n=r(23915),t=r(35317),i=r(86864);try{(0,n.Dk)().length?(a=(0,n.Dk)()[0],console.log("Using existing Firebase app")):(a=(0,n.Wp)({apiKey:"AIzaSyAZ4cdr8KZU-Z5Ohp04MzvIGLG_tGblxfE",authDomain:"bixy-stock.firebaseapp.com",projectId:"bixy-stock",storageBucket:"bixy-stock.appspot.com",messagingSenderId:"357634877813",appId:"1:357634877813:web:80fc5b029a1606c3200b3c",measurementId:"G-3DZEWTG2HW"}),console.log("Firebase initialized successfully")),l=(0,t.aU)(a),console.log("Firestore initialized successfully")}catch(e){throw console.error("Error initializing Firebase:",e),e}(0,i.P5)(a)},16967:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>j});var a=r(95155),l=r(12115),n=r(55028),t=r(66766),i=r(810),o=r(35317),c=r(83729);function d(){let[e,s]=(0,l.useState)("loading"),[r,n]=(0,l.useState)(null);return(0,l.useEffect)(()=>{(async()=>{try{await (0,o.GG)((0,o.rJ)(i.db,"bikes")),s("connected")}catch(e){console.error("Firebase connection error:",e),s("error"),n(e instanceof Error?e.message:String(e))}})()},[]),(0,a.jsx)(c.A,{title:"loading"===e?"Testing database connection...":"connected"===e?"Connected to database":"Error connecting to database: ".concat(r),arrow:!0,placement:"bottom",children:(0,a.jsx)("div",{className:"\n          w-3 h-3 rounded-full \n          ".concat("loading"===e?"bg-yellow-400 animate-pulse":"connected"===e?"bg-green-500":"bg-red-500","\n        "),style:{cursor:"help"}})})}var x=r(54581),m=r(49994),h=r(18096),b=r(68534),u=r(40857),g=r(35695);let p=(0,n.default)(()=>Promise.all([r.e(969),r.e(935),r.e(788)]).then(r.bind(r,52788)),{loadableGenerated:{webpack:()=>[52788]},ssr:!1,loading:()=>(0,a.jsx)("p",{children:"Loading bike inventory..."})}),f=(0,n.default)(()=>Promise.all([r.e(969),r.e(871)]).then(r.bind(r,60871)),{loadableGenerated:{webpack:()=>[60871]},ssr:!1,loading:()=>(0,a.jsx)("p",{children:"Loading CSV importer..."})});function j(){let[e,s]=(0,l.useState)(null),[r,n]=(0,l.useState)(0),[i,o]=(0,l.useState)(!0),[c,j]=(0,l.useState)(!1),[v,y]=(0,l.useState)(!1),N=(0,g.usePathname)().startsWith("/bixy")?"/bixy":"";return((0,l.useEffect)(()=>{let e=e=>{var r,a;console.error("Global error:",e.error),((null==(r=e.error)?void 0:r.toString().includes("Firebase"))||(null==(a=e.error)?void 0:a.toString().includes("Firestore")))&&(s(e.error),e.preventDefault())};return window.addEventListener("error",e),()=>window.removeEventListener("error",e)},[]),e)?(0,a.jsx)("main",{className:"flex min-h-screen flex-col p-6",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"flex items-center mb-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(t.default,{src:"".concat(N,"/bixy-logo.svg"),alt:"Bixy Logo",width:80,height:64,priority:!0,className:"object-contain"}),(0,a.jsx)("h1",{className:"text-3xl font-bold ml-4",children:"Bixy Stock Management"}),(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsx)(d,{})})]})}),(0,a.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[(0,a.jsx)("p",{className:"font-bold",children:"Error connecting to database"}),(0,a.jsx)("p",{children:e.message}),(0,a.jsx)("p",{className:"mt-2",children:"Please check your Firebase configuration and make sure you have the correct permissions."})]})]})}):(0,a.jsx)("main",{className:"flex min-h-screen flex-col p-6",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"flex items-center mb-4",children:(0,a.jsxs)("div",{className:"flex items-center flex-grow",children:[(0,a.jsx)(t.default,{src:"".concat(N,"/bixy-logo.svg"),alt:"Bixy Logo",width:80,height:64,priority:!0,className:"object-contain"}),(0,a.jsx)("h1",{className:"text-3xl font-bold ml-4",children:"Bixy Stock Management"}),(0,a.jsx)("div",{className:"ml-2",children:(0,a.jsx)(d,{})})]})}),(0,a.jsx)("div",{className:"flex items-center mb-4",children:(0,a.jsxs)(x.A,{sx:{display:"flex",width:"100%",alignItems:"center",borderBottom:1,borderColor:"divider"},children:[(0,a.jsxs)(m.A,{value:r,onChange:(e,s)=>{n(s),0===s?(o(!0),j(!1)):(o(!1),j(!0))},"aria-label":"inventory tabs",sx:{flexGrow:1,"& .MuiTab-root":{color:"#555555","&.Mui-selected":{color:"#1976d2"}}},children:[(0,a.jsx)(h.A,{label:"View Inventory"}),(0,a.jsx)(h.A,{label:"Import from CSV"})]}),0===r&&(0,a.jsx)(b.A,{variant:"contained",color:"primary",startIcon:(0,a.jsx)(u.A,{}),onClick:()=>{y(!0)},sx:{ml:2},children:"Add New Bike"})]})}),(0,a.jsxs)("div",{children:[i&&(0,a.jsx)("div",{className:"h-[calc(100vh-200px)]",children:(0,a.jsx)(p,{openAddDialog:v,setOpenAddDialog:y})}),c&&(0,a.jsx)("div",{children:(0,a.jsx)(f,{})})]})]})})}},41786:(e,s,r)=>{Promise.resolve().then(r.bind(r,16967))}},e=>{var s=s=>e(e.s=s);e.O(0,[992,347,441,684,358],()=>s(41786)),_N_E=e.O()}]);