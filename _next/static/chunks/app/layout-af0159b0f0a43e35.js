(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{810:(e,t,r)=>{"use strict";let a,s,o,i;r.d(t,{db:()=>s,hJ:()=>i,j2:()=>o,vE:()=>d});var l=r(23915),n=r(35317),c=r(86864),u=r(16203);try{(0,l.Dk)().length?(a=(0,l.Dk)()[0],console.log("Using existing Firebase app")):(a=(0,l.Wp)({apiKey:"AIzaSyAZ4cdr8KZU-Z5Ohp04MzvIGLG_tGblxfE",authDomain:"bixy-stock.firebaseapp.com",projectId:"bixy-stock",storageBucket:"bixy-stock.appspot.com",messagingSenderId:"357634877813",appId:"1:357634877813:web:80fc5b029a1606c3200b3c",measurementId:"G-3DZEWTG2HW"}),console.log("Firebase initialized successfully")),s=(0,n.aU)(a),console.log("Firestore initialized successfully"),o=(0,u.xI)(a),i=new u.HF,console.log("Firebase Auth initialized successfully")}catch(e){throw console.error("Error initializing Firebase:",e),e}(0,c.P5)(a);let d="adam.cernik@gmail.com"},19324:()=>{},23475:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>u});var a=r(95155),s=r(12115),o=r(16203),i=r(810),l=r(41396);let n=(0,s.createContext)({user:null,userData:null,loading:!0,loginWithGoogle:async()=>{},logout:async()=>{}});function c(){return(0,s.useContext)(n)}function u(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[g,y]=(0,s.useState)(!0);(0,s.useEffect)(()=>(0,o.hg)(i.j2,async e=>{c(e),e?d(await (0,l.LU)(e)):d(null),y(!1)}),[]);let h=async()=>{try{let e=await (0,l.G6)();d(e)}catch(e){console.error("Error logging in with Google:",e)}},b=async()=>{try{await (0,l.BP)(),d(null)}catch(e){console.error("Error logging out:",e)}};return(0,a.jsx)(n.Provider,{value:{user:r,userData:u,loading:g,loginWithGoogle:h,logout:b},children:!g&&t})}},39432:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_7f9a85",variable:"__variable_7f9a85"}},41396:(e,t,r)=>{"use strict";r.d(t,{BP:()=>l,CF:()=>c,G6:()=>i,JY:()=>u,LU:()=>n});var a=r(16203),s=r(35317),o=r(810);let i=async()=>{try{let e=(await (0,a.df)(o.j2,o.hJ)).user,t=(0,s.H9)(o.db,"users",e.uid),r=await (0,s.x7)(t),i=s.Dc.now(),l=e.email===o.vE;if(r.exists()){let e=r.data();return await (0,s.mZ)(t,{lastLogin:i}),e}{let r={uid:e.uid,email:e.email||"",displayName:e.displayName||"",photoURL:e.photoURL,hasAccess:l,isAdmin:l,lastLogin:i,createdAt:i};return await (0,s.BN)(t,r),r}}catch(e){return console.error("Error signing in with Google:",e),null}},l=async()=>{try{return await (0,a.CI)(o.j2),!0}catch(e){return console.error("Error signing out:",e),!1}},n=async e=>{try{let t=(0,s.H9)(o.db,"users",e.uid),r=await (0,s.x7)(t);if(r.exists())return r.data();return null}catch(e){return console.error("Error getting current user data:",e),null}},c=async()=>{try{let e=(0,s.collection)(o.db,"users"),t=(0,s.P)(e),r=await (0,s.getDocs)(t),a=[];return r.forEach(e=>{a.push(e.data())}),a}catch(e){return console.error("Error getting users:",e),[]}},u=async(e,t)=>{try{let r=(0,s.H9)(o.db,"users",e);return await (0,s.mZ)(r,{hasAccess:t}),!0}catch(e){return console.error("Error updating user access:",e),!1}}},65688:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_f9091f",variable:"__variable_f9091f"}},94379:(e,t,r)=>{Promise.resolve().then(r.bind(r,23475)),Promise.resolve().then(r.t.bind(r,65688,23)),Promise.resolve().then(r.t.bind(r,39432,23)),Promise.resolve().then(r.t.bind(r,19324,23))}},e=>{var t=t=>e(e.s=t);e.O(0,[261,992,118,566,441,684,358],()=>t(94379)),_N_E=e.O()}]);